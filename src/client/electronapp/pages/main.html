<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ChatCLI</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Single flex container for sidebar + chat area -->
  <div id="container">
    <!-- Sidebar -->
    <div id="sidebar">
      <div id="ws-banner" class="info-message" style="display:none"></div>
      <div id="user-info" title="Your username"></div>
      <div id="new-chat">
        <!-- Private chat -->
        <div class="input-with-icon">
          <input
            id="new-chat-username"
            placeholder="Add friend by username"
          />
          <span
            class="add-icon"
            id="create-chat-btn"
            title="Start private chat"
          >+</span>
        </div>
      
        <!-- Group chat: open modal -->
        <div class="input-with-icon" style="margin-top: var(--space-sm);">
          <input
            id="new-group-name"
            placeholder="New group name"
          />
          <span
            class="add-icon"
            id="create-group-btn"
            title="Add members to group"
          >+</span>
        </div>

      
        <!-- Group chat: step 2 = add members -->
        <div
          id="new-group-members-container"
          class="input-with-icon hidden"
          style="margin-top: var(--space-sm);"
        >
          <input
            id="new-group-members-input"
            placeholder="Members (comma-separated usernames)"
          />
          <span
            class="add-icon"
            id="add-group-members-btn"
            title="Add members (step 2)"
          >+</span>
        </div>
      </div>
         
      <ul id="chat-list"></ul>
      <button id="logout-btn" type="button">Logout</button>
    </div>

    <!-- Chat window -->
    <div id="chat-window">
      <!-- Chat header: title + optional Edit Members button -->
      <div id="chat-header" class="hidden">
        <span id="chat-title"></span>
        <button id="edit-members-btn" class="modal-btn secondary hidden">Edit Members</button>
      </div>
      <div id="messages">
        <div id="no-chat-selected" class="placeholder">
          <h2>Welcome to ChatCLI</h2>
          <p>Select a conversation to start chatting</p>
        </div>  
      </div>

      <div id="typing-indicator" style="display:none; font-style:italic; margin: 5px;"></div>

      <div id="message-input" class="chat-controls hidden">
        <textarea id="message-text" placeholder="Type a message…" rows="1"></textarea>
        <button id="send-btn" type="button" data-requires-online title="Send">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
          </svg>
        </button>
      </div>
    </div>

  </div>

  <!-- Toast container -->
  <div id="toast-container"></div>

  <!-- Modal container -->
  <div id="modal-container" class="modal hidden">
    <div class="modal-content">
      <p id="modal-message">Are you sure you want to archive this chat?</p>
      <div class="modal-actions">
        <button id="modal-confirm-btn" class="modal-btn">Yes</button>
        <button id="modal-cancel-btn" class="modal-btn">No</button>
      </div>
    </div>
  </div>
  <!-- Group Creation Modal -->
  <div id="group-modal" class="modal hidden">
    <div class="modal-content">
      <h2>Create Group Chat</h2>
      <!-- Display the chosen group name -->
      <p><strong>Group:</strong> <span id="group-modal-name-display"></span></p>
      <!-- Input + button to add one member at a time -->
      <div class="input-with-icon" style="margin-top: var(--space-sm);">
        <input
          type="text"
          id="group-member-input"
          placeholder="Enter username to add"
        />
        <span
          class="add-icon"
          id="group-add-member-btn"
          title="Add member"
        >+</span>
      </div>
      <!-- List of added members -->
      <ul id="group-member-list" style="margin-top: var(--space-sm); list-style:none; padding:0;"></ul>
      <!-- Submit or cancel -->
      <div class="modal-actions" style="margin-top: var(--space-md);">
        <button id="group-create-submit-btn" class="modal-btn">Create Group</button>
        <button id="group-cancel-btn" type="button" class="modal-btn secondary">Cancel</button>
      </div>
      <button id="group-modal-close" class="modal-close" title="Close">&times;</button>
    </div>
  </div>

  <!-- ★ Profile Modal (add just above your <script> tag) -->
  <div id="profile-modal" class="modal hidden">
    <div class="modal-content">
      <h2>Edit Profile</h2>
      <form id="profile-form">
        <label for="edit-username">Username</label>
        <input type="text" id="username" name="username" required />

        <label for="edit-email">Email address</label>
        <input type="email" id="email" name="email" required />

        <div class="modal-actions">
          <button type="submit" class="modal-btn">Save changes</button>
          <button type="button" id="disable-account-btn" class="modal-btn secondary">Disable account</button>
          <button type="button" id="delete-account-btn" class="modal-btn danger">Delete account</button>
        </div>

        <div class="links">
          <a href="reset-password-request.html">Reset password</a>
        </div>
      </form>
      <button id="close-profile-modal" class="modal-close" title="Close">&times;</button>
    </div>
  </div>
  <!-- Edit Group Members Modal -->
  <div id="edit-members-modal" class="modal hidden">
    <div class="modal-content">
      <h2>Edit Group Members</h2>
      <ul id="edit-member-list" style="list-style:none; padding:0; max-height:200px; overflow-y:auto;"></ul>

      <div class="input-with-icon" style="margin-top: var(--space-sm);">
        <input id="edit-member-input" placeholder="Username to add" />
        <span class="add-icon" id="edit-member-add-btn">+</span>
      </div>

      <div class="modal-actions" style="margin-top: var(--space-md);">
        <button id="edit-members-close-btn" class="modal-btn">Close</button>
      </div>
      <button id="edit-members-modal-close" class="modal-close" title="Close">&times;</button>
    </div>
  </div>


  <script src="main.renderer.js"></script>
</body>
</html>
